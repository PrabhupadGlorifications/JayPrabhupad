<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>About</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="card.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
        integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>

<body>
    <div id="header-container"></div>

    <main>
        <div class="para">
            <h1 class="heading">The proper method of dressing Jagannatha is as a Ksatriya King</h1>
            <p class="image"><img src="images/dressing.jpg" /></p>
            <div class="shloka">
                <p><strong>“The proper method of dressing Jagannatha is as a Ksatriya King, and there is no limit to the
                        opulence you can give Him.”</strong></p>
                <p><i> ~Letter of February 19,1973</i></p>
            </div>
            <p>
                Krsna said to arjuna in battlefield of kurukshetra <i>pradhanyatah kuru-srestha nasty anto vistarasya me
                </i><strong> O Arjuna, for My opulence is limitless.</strong>(10.19) this is declared universally by
                lord and he has showed this fact at every step by displaying his opulence in his bhauma-lila. but
                something which does not fits in the tiny minds of the population is that by service of krsna, krsna
                takes care of all needs of his devotee as said by prabhupad:</p>
            <p><strong><i>Therefore, by serving Krishna directly the result of the service indirectly comes to
                        us</i></strong> (Letter to yamuna) </p>
            <p>By his immense and extraordinary service to the opulent lord <i>Sri Jagannath</i> Srila Prabhupad was
                also an opulent sannyasi. The world never saw a sannyasi who is so opulent and opulent to this extent.
                Anyone who saw him got captivated by his presence. No one can Forget Srila Prabhupad.</p>
            <hr class="line">
            <p>~Admin</p>
        </div>
    </main>

    <div id="anext-container"></div>

    <button id="likeBtn">❤️ Like (<span id="likeCount">0</span>)</button>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-app.js";
        import { getDatabase, ref, onValue, runTransaction } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyCWxaABz6OSVfSniGEMdjbrWJDgmNRlzNQ",
            authDomain: "pgsite1957.firebaseapp.com",
            databaseURL: "https://pgsite1957-default-rtdb.firebaseio.com",
            projectId: "pgsite1957",
            storageBucket: "pgsite1957.firebasestorage.app",
            messagingSenderId: "464761905973",
            appId: "1:464761905973:web:c0d182ff433b029f8be27c"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        // Identify current article
        const articleId = window.location.pathname.split("/").pop().replace(".html", "");

        // Track user like status in localStorage
        const localKey = `liked_${articleId}`;
        let hasLiked = localStorage.getItem(localKey) === "true";

        const likeRef = ref(db, 'likes/' + articleId);

        // Update UI when count changes
        onValue(likeRef, (snapshot) => {
            const count = snapshot.val() || 0;
            document.getElementById("likeCount").innerText = count;
            updateButton();
        });

        // Like button click
        document.getElementById("likeBtn").addEventListener('click', () => {
            runTransaction(likeRef, (currentLikes) => {
                if (hasLiked) {
                    hasLiked = false;
                    localStorage.setItem(localKey, "false");
                    return Math.max((currentLikes || 1) - 1, 0);
                } else {
                    hasLiked = true;
                    localStorage.setItem(localKey, "true");
                    return (currentLikes || 0) + 1;
                }
            });
        });

        function updateButton() {
            document.getElementById("likeBtn").style.color = hasLiked ? "red" : "black";
        }

    </script>



    <div id="footer-container"></div>

    <script src="script.js"></script>
    <script src="head.js"></script>
    <script src="anext.js"></script>
    <script src="alist.js"></script>
    <script src="footer.js"></script>
</body>

</html>